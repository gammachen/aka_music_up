# 日期和时间
* Python 程序能用很多方式处理日期和时间，转换日期格式是一个常见的功能。
* Python 提供了一个 time 和 calendar 模块可以用于格式化日期和时间。
* 时间间隔是以秒为单位的浮点小数。
* 每个时间戳都以自从1970年1月1日午夜（历元）经过了多长时间来表示。
* Python 的 time 模块下有很多函数可以转换常见日期格式。
* 函数time.time()用于获取当前时间戳, 


```python
import time # 引入time模块
print(time.time())
```

    1529248021.8936598


时间戳单位最适于做日期运算。但是1970年之前的日期就无法以此表示了。太遥远的日期也不行，UNIX和Windows只支持到2038年。

# 什么是时间元组？
* 很多Python函数用一个元组装起来的9组数字处理时间:<br>
<img src='19._日期和时间_files/image.png' align=left><br>

* 上述也就是struct_time元组。这种结构具有如下属性：<br>
<img src='19._日期和时间_files/image.png' align=left><br>

# 获取当前时间
从返回浮点数的时间辍方式向时间元组转换，只要将浮点数传递给如localtime之类的函数。


```python
l = time.localtime(time.time())
print('当前时间为' , l)
```

    当前时间为 time.struct_time(tm_year=2018, tm_mon=6, tm_mday=17, tm_hour=23, tm_min=19, tm_sec=6, tm_wday=6, tm_yday=168, tm_isdst=0)


# 获取格式化的时间
你可以根据需求选取各种格式，但是最简单的获取可读的时间模式的函数是asctime():


```python
print(time.asctime(time.localtime(time.time())))
```

    Sun Jun 17 23:20:56 2018


# 格式化日期
我们可以使用 time 模块的 strftime 方法来格式化日期，：


```python
# 2018-08-08 12:12:12 
print(time.strftime("%Y-%m-%d %H:%M:%S",time.localtime()))
```

    2018-06-17 23:41:44


# python中时间日期格式化符号：
* %y 两位数的年份表示（00-99）
* %Y 四位数的年份表示（000-9999）
* %m 月份（01-12）
* %d 月内中的一天（0-31）
* %H 24小时制小时数（0-23）
* %I 12小时制小时数（01-12）
* %M 分钟数（00=59）
* %S 秒（00-59）
* %a 本地简化星期名称
* %A 本地完整星期名称
* %b 本地简化的月份名称
* %B 本地完整的月份名称
* %c 本地相应的日期表示和时间表示
* %j 年内的一天（001-366）
* %p 本地A.M.或P.M.的等价符
* %U 一年中的星期数（00-53）星期天为星期的开始
* %w 星期（0-6），星期天为星期的开始
* %W 一年中的星期数（00-53）星期一为星期的开始
* %x 本地相应的日期表示
* %X 本地相应的时间表示
* %Z 当前时区的名称
* %% %号本身


```python
ls=["%y 两位数的年份表示（00-99）"
,"%Y 四位数的年份表示（000-9999）"
,"%m 月份（01-12）"
,"%d 月内中的一天（0-31）"
,"%H 24小时制小时数（0-23）"
,"%I 12小时制小时数（01-12）"
,"%M 分钟数（00=59）"
,"%S 秒（00-59）"
,"%a 本地简化星期名称"
,"%A 本地完整星期名称"
,"%b 本地简化的月份名称"
,"%B 本地完整的月份名称"
,"%c 本地相应的日期表示和时间表示"
,"%j 年内的一天（001-366）"
,"%p 本地A.M.或P.M.的等价符"
,"%U 一年中的星期数（00-53）星期天为星期的开始"
,"%w 星期（0-6），星期天为星期的开始"
,"%W 一年中的星期数（00-53）星期一为星期的开始"
,"%x 本地相应的日期表示"
,"%X 本地相应的时间表示"
,"%Z 当前时区的名称"
,"%% %号本身"]
for i in ls:
    print('{0:30}-----{1}'.format(time.strftime(i[:2],time.localtime()),i))
```

    18                            -----%y 两位数的年份表示（00-99）
    2018                          -----%Y 四位数的年份表示（000-9999）
    06                            -----%m 月份（01-12）
    17                            -----%d 月内中的一天（0-31）
    23                            -----%H 24小时制小时数（0-23）
    11                            -----%I 12小时制小时数（01-12）
    45                            -----%M 分钟数（00=59）
    23                            -----%S 秒（00-59）
    Sun                           -----%a 本地简化星期名称
    Sunday                        -----%A 本地完整星期名称
    Jun                           -----%b 本地简化的月份名称
    June                          -----%B 本地完整的月份名称
    Sun Jun 17 23:45:23 2018      -----%c 本地相应的日期表示和时间表示
    168                           -----%j 年内的一天（001-366）
    PM                            -----%p 本地A.M.或P.M.的等价符
    24                            -----%U 一年中的星期数（00-53）星期天为星期的开始
    0                             -----%w 星期（0-6），星期天为星期的开始
    24                            -----%W 一年中的星期数（00-53）星期一为星期的开始
    06/17/18                      -----%x 本地相应的日期表示
    23:45:23                      -----%X 本地相应的时间表示
    ?D1¨²¡À¨º¡Á?¨º¡À??            -----%Z 当前时区的名称
    %                             -----%% %号本身


# 获取某月日历
Calendar模块有很广泛的方法用来处理年历和月历，例如打印某月的月历：


```python
import calendar
cal=calendar.month(2018,6)
print('2018年6月的日历：')
print(cal)
```

    2018年6月的日历：
         June 2018
    Mo Tu We Th Fr Sa Su
                 1  2  3
     4  5  6  7  8  9 10
    11 12 13 14 15 16 17
    18 19 20 21 22 23 24
    25 26 27 28 29 30
    


# Time 模块内置函数
# time.altzone
返回格林威治西部的夏令时地区的偏移秒数。如果该地区在格林威治东部会返回负值（如西欧，包括英国）。对夏令时启用地区才能使用。


```python
print(time.altzone)
```

    -32400


# time.asctime([tupletime])
接受时间元组并返回一个可读的形式


```python
print(time.asctime(time.localtime()))
```

    Sun Jun 17 23:59:27 2018


# time clock()
以浮点数计算的秒数返回当前的CPU时间。用来衡量不同程序的耗时。<br>
需要注意，在不同的系统上含义不同。在UNIX系统上，它返回的是"进程时间"，它是用秒表示的浮点数（时间戳）。而在WINDOWS中，第一次调用，返回的是进程运行的实际时间。而第二次之后的调用是自第一次调用以后到现在的运行时间。


```python
time.clock()
```




    19.352420381693953



# time.ctime([secs])
作用相当于asctime(localtime(secs))，未给参数相当于asctime()


```python
print(time.asctime(time.localtime()))
print(time.ctime(time.time()))
```

    Mon Jun 18 00:02:04 2018
    Mon Jun 18 00:02:04 2018


# time.gmtime([secs])
接收时间辍（1970纪元后经过的浮点秒数）并返回格林威治天文时间下的时间元组t。


```python
print(time.gmtime(time.time()))
```

    time.struct_time(tm_year=2018, tm_mon=6, tm_mday=17, tm_hour=16, tm_min=4, tm_sec=22, tm_wday=6, tm_yday=168, tm_isdst=0)


# time.localtime([secs]
接收时间辍（1970纪元后经过的浮点秒数）并返回当地时间下的时间元组


```python
print(time.localtime())
```

    time.struct_time(tm_year=2018, tm_mon=6, tm_mday=18, tm_hour=0, tm_min=5, tm_sec=37, tm_wday=0, tm_yday=169, tm_isdst=0)


# time.mktime(tupletime)
接受时间元组并返回时间辍（1970纪元后经过的浮点秒数）。


```python
print(time.mktime(time.localtime()))
```

    1529251617.0


# time.sleep(secs)
推迟调用线程的运行，secs指秒数。


```python
print("start...")
time.sleep(3)
print('end')
```

    start...
    end


# time.strftime(fmt[,tupletime])
接收以时间元组，并返回以可读字符串表示的当地时间，格式由fmt决定。


```python
print(time.strftime('%Y'))
```

    2018


# time.strptime(str,fmt='%a %b %d %H:%M:%S %Y')
根据fmt的格式把一个时间字符串解析为时间元组。


```python
print(time.strptime('2017.01.01','%Y.%m.%d'))
```

    time.struct_time(tm_year=2017, tm_mon=1, tm_mday=1, tm_hour=0, tm_min=0, tm_sec=0, tm_wday=6, tm_yday=1, tm_isdst=-1)


# time.time( )
返回当前时间的时间戳（1970纪元后经过的浮点秒数）。


```python
print(time.time())
```

    1529251933.9630861


# 日历（Calendar）模块、内置函数
此模块的函数都是日历相关的，例如打印某月的字符月历。

# calendar.calendar(year,w=2,l=1,c=6)
返回一个多行字符串格式的year年年历，3个月一行，间隔距离为c。 每日宽度间隔为w字符。每行长度为21\* W+18+2\* C。l是每星期行数。


```python
print(calendar.calendar(2018))
```

                                      2018
    
          January                   February                   March
    Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
     1  2  3  4  5  6  7                1  2  3  4                1  2  3  4
     8  9 10 11 12 13 14       5  6  7  8  9 10 11       5  6  7  8  9 10 11
    15 16 17 18 19 20 21      12 13 14 15 16 17 18      12 13 14 15 16 17 18
    22 23 24 25 26 27 28      19 20 21 22 23 24 25      19 20 21 22 23 24 25
    29 30 31                  26 27 28                  26 27 28 29 30 31
    
           April                      May                       June
    Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
                       1          1  2  3  4  5  6                   1  2  3
     2  3  4  5  6  7  8       7  8  9 10 11 12 13       4  5  6  7  8  9 10
     9 10 11 12 13 14 15      14 15 16 17 18 19 20      11 12 13 14 15 16 17
    16 17 18 19 20 21 22      21 22 23 24 25 26 27      18 19 20 21 22 23 24
    23 24 25 26 27 28 29      28 29 30 31               25 26 27 28 29 30
    30
    
            July                     August                  September
    Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
                       1             1  2  3  4  5                      1  2
     2  3  4  5  6  7  8       6  7  8  9 10 11 12       3  4  5  6  7  8  9
     9 10 11 12 13 14 15      13 14 15 16 17 18 19      10 11 12 13 14 15 16
    16 17 18 19 20 21 22      20 21 22 23 24 25 26      17 18 19 20 21 22 23
    23 24 25 26 27 28 29      27 28 29 30 31            24 25 26 27 28 29 30
    30 31
    
          October                   November                  December
    Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
     1  2  3  4  5  6  7                1  2  3  4                      1  2
     8  9 10 11 12 13 14       5  6  7  8  9 10 11       3  4  5  6  7  8  9
    15 16 17 18 19 20 21      12 13 14 15 16 17 18      10 11 12 13 14 15 16
    22 23 24 25 26 27 28      19 20 21 22 23 24 25      17 18 19 20 21 22 23
    29 30 31                  26 27 28 29 30            24 25 26 27 28 29 30
                                                        31
    


# calendar.firstweekday( )
返回当前每周起始日期的设置。默认情况下，首次载入caendar模块时返回0，即星期一。


```python
calendar.firstweekday()
```




    0



# 	calendar.isleap(year)
是闰年返回True，否则为false。


```python
calendar.isleap(2016)
```




    True



# calendar.leapdays(y1,y2)
返回在Y1，Y2两年之间的闰年总数。


```python
calendar.leapdays(2000,2020)
```




    5



# calendar.month(year,month,w=2,l=1)
返回一个多行字符串格式的year年month月日历，两行标题，一周一行。每日宽度间隔为w字符。每行的长度为7\*w+6。l是每星期的行数。


```python
print(calendar.month(2018,6))
```

         June 2018
    Mo Tu We Th Fr Sa Su
                 1  2  3
     4  5  6  7  8  9 10
    11 12 13 14 15 16 17
    18 19 20 21 22 23 24
    25 26 27 28 29 30
    


# calendar.monthcalendar(year,month)
返回一个整数的单层嵌套列表。每个子列表装载代表一个星期的整数。Year年month月外的日期都设为0;范围内的日子都由该月第几日表示，从1开始。


```python
print(calendar.monthcalendar(2018,6))
```

    [[0, 0, 0, 0, 1, 2, 3], [4, 5, 6, 7, 8, 9, 10], [11, 12, 13, 14, 15, 16, 17], [18, 19, 20, 21, 22, 23, 24], [25, 26, 27, 28, 29, 30, 0]]


# calendar.monthrange(year,month)
返回两个整数。第一个是该月的星期几的日期码，第二个是该月的日期码。日从0（星期一）到6（星期日）;月从1到12。


```python
print(calendar.monthrange(2018,8))
```

    (2, 31)


# calendar.prcal(year,w=2,l=1,c=6)
相当于 print calendar.calendar(year,w,l,c).


```python
calendar.prcal(2018)
```

                                      2018
    
          January                   February                   March
    Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
     1  2  3  4  5  6  7                1  2  3  4                1  2  3  4
     8  9 10 11 12 13 14       5  6  7  8  9 10 11       5  6  7  8  9 10 11
    15 16 17 18 19 20 21      12 13 14 15 16 17 18      12 13 14 15 16 17 18
    22 23 24 25 26 27 28      19 20 21 22 23 24 25      19 20 21 22 23 24 25
    29 30 31                  26 27 28                  26 27 28 29 30 31
    
           April                      May                       June
    Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
                       1          1  2  3  4  5  6                   1  2  3
     2  3  4  5  6  7  8       7  8  9 10 11 12 13       4  5  6  7  8  9 10
     9 10 11 12 13 14 15      14 15 16 17 18 19 20      11 12 13 14 15 16 17
    16 17 18 19 20 21 22      21 22 23 24 25 26 27      18 19 20 21 22 23 24
    23 24 25 26 27 28 29      28 29 30 31               25 26 27 28 29 30
    30
    
            July                     August                  September
    Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
                       1             1  2  3  4  5                      1  2
     2  3  4  5  6  7  8       6  7  8  9 10 11 12       3  4  5  6  7  8  9
     9 10 11 12 13 14 15      13 14 15 16 17 18 19      10 11 12 13 14 15 16
    16 17 18 19 20 21 22      20 21 22 23 24 25 26      17 18 19 20 21 22 23
    23 24 25 26 27 28 29      27 28 29 30 31            24 25 26 27 28 29 30
    30 31
    
          October                   November                  December
    Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su      Mo Tu We Th Fr Sa Su
     1  2  3  4  5  6  7                1  2  3  4                      1  2
     8  9 10 11 12 13 14       5  6  7  8  9 10 11       3  4  5  6  7  8  9
    15 16 17 18 19 20 21      12 13 14 15 16 17 18      10 11 12 13 14 15 16
    22 23 24 25 26 27 28      19 20 21 22 23 24 25      17 18 19 20 21 22 23
    29 30 31                  26 27 28 29 30            24 25 26 27 28 29 30
                                                        31
    


# calendar.prmonth(year,month,w=2,l=1)
calendar.month(year,month,w=2,l=1)


```python
calendar.prmonth(2018,6)
```

         June 2018
    Mo Tu We Th Fr Sa Su
                 1  2  3
     4  5  6  7  8  9 10
    11 12 13 14 15 16 17
    18 19 20 21 22 23 24
    25 26 27 28 29 30


# calendar.setfirstweekday(weekday)
设置每周的起始日期码。0（星期一）到6（星期日）。


```python
calendar.setfirstweekday(1)
calendar.firstweekday()
```




    1




```python
calendar.prcal(2018)
```

                                      2018
    
          January                   February                   March
    Tu We Th Fr Sa Su Mo      Tu We Th Fr Sa Su Mo      Tu We Th Fr Sa Su Mo
                       1             1  2  3  4  5             1  2  3  4  5
     2  3  4  5  6  7  8       6  7  8  9 10 11 12       6  7  8  9 10 11 12
     9 10 11 12 13 14 15      13 14 15 16 17 18 19      13 14 15 16 17 18 19
    16 17 18 19 20 21 22      20 21 22 23 24 25 26      20 21 22 23 24 25 26
    23 24 25 26 27 28 29      27 28                     27 28 29 30 31
    30 31
    
           April                      May                       June
    Tu We Th Fr Sa Su Mo      Tu We Th Fr Sa Su Mo      Tu We Th Fr Sa Su Mo
                    1  2       1  2  3  4  5  6  7                1  2  3  4
     3  4  5  6  7  8  9       8  9 10 11 12 13 14       5  6  7  8  9 10 11
    10 11 12 13 14 15 16      15 16 17 18 19 20 21      12 13 14 15 16 17 18
    17 18 19 20 21 22 23      22 23 24 25 26 27 28      19 20 21 22 23 24 25
    24 25 26 27 28 29 30      29 30 31                  26 27 28 29 30
    
            July                     August                  September
    Tu We Th Fr Sa Su Mo      Tu We Th Fr Sa Su Mo      Tu We Th Fr Sa Su Mo
                    1  2          1  2  3  4  5  6                   1  2  3
     3  4  5  6  7  8  9       7  8  9 10 11 12 13       4  5  6  7  8  9 10
    10 11 12 13 14 15 16      14 15 16 17 18 19 20      11 12 13 14 15 16 17
    17 18 19 20 21 22 23      21 22 23 24 25 26 27      18 19 20 21 22 23 24
    24 25 26 27 28 29 30      28 29 30 31               25 26 27 28 29 30
    31
    
          October                   November                  December
    Tu We Th Fr Sa Su Mo      Tu We Th Fr Sa Su Mo      Tu We Th Fr Sa Su Mo
                       1             1  2  3  4  5                   1  2  3
     2  3  4  5  6  7  8       6  7  8  9 10 11 12       4  5  6  7  8  9 10
     9 10 11 12 13 14 15      13 14 15 16 17 18 19      11 12 13 14 15 16 17
    16 17 18 19 20 21 22      20 21 22 23 24 25 26      18 19 20 21 22 23 24
    23 24 25 26 27 28 29      27 28 29 30               25 26 27 28 29 30 31
    30 31
    


# calendar.timegm(tupletime)
和time.gmtime相反：接受一个时间元组形式，返回该时刻的时间辍（1970纪元后经过的浮点秒数）。


```python
print(calendar.timegm(time.localtime()))
```

    1529282831


# calendar.weekday(year,month,day)
返回给定日期的日期码。0（星期一）到6（星期日）。月份为 1（一月） 到 12（12月）。


```python
print(calendar.weekday(2018,6,18))
```

    0


学术知识图谱案例，包含研究人员、论文、机构、研究领域等实体及其复杂关系，并利用RDFLib和OWLRL实现推理功能：

```python
from rdflib import Graph, URIRef, Literal, Namespace, RDFS, RDF, FOAF, OWL
from rdflib.plugins.sparql import prepareQuery
from owlrl import DeductiveClosure, OWLRL_Extension

# ========== 1. 定义命名空间 ==========
# 核心命名空间
acad = Namespace("http://academic.org/ontology/")
dbr = Namespace("http://dbpedia.org/resource/")
dct = Namespace("http://purl.org/dc/terms/")

# ========== 2. 创建知识图谱 ==========
g = Graph()

# 绑定命名空间
g.bind("acad", acad)
g.bind("dbr", dbr)
g.bind("dct", dct)
g.bind("foaf", FOAF)

# ========== 3. 定义本体结构 ==========
# 声明类
g.add((acad.Researcher, RDF.type, OWL.Class))
g.add((acad.Paper, RDF.type, OWL.Class))
g.add((acad.Institution, RDF.type, OWL.Class))
g.add((acad.ResearchField, RDF.type, OWL.Class))

# 声明属性
g.add((acad.authorOf, RDF.type, OWL.ObjectProperty))
g.add((acad.cites, RDF.type, OWL.ObjectProperty))
g.add((acad.affiliatedWith, RDF.type, OWL.ObjectProperty))
g.add((acad.inField, RDF.type, OWL.ObjectProperty))
g.add((acad.subFieldOf, RDF.type, OWL.ObjectProperty))

# 设置属性特征
g.add((acad.subFieldOf, RDF.type, OWL.TransitiveProperty))  # 子领域具有传递性

# 定义领域和值域
g.add((acad.authorOf, RDFS.domain, acad.Researcher))
g.add((acad.authorOf, RDFS.range, acad.Paper))
g.add((acad.affiliatedWith, RDFS.domain, acad.Researcher))
g.add((acad.affiliatedWith, RDFS.range, acad.Institution))

# ========== 4. 添加实例数据 ==========
# 研究人员
maria = URIRef("http://academic.org/researcher/maria_curie")
alan = URIRef("http://academic.org/researcher/alan_turing")
yoshua = URIRef("http://academic.org/researcher/yoshua_bengio")

g.add((maria, RDF.type, acad.Researcher))
g.add((maria, FOAF.name, Literal("Marie Curie")))
g.add((maria, acad.affiliatedWith, URIRef("http://academic.org/institution/paris_u")))

g.add((alan, RDF.type, acad.Researcher))
g.add((alan, FOAF.name, Literal("Alan Turing")))
g.add((alan, acad.affiliatedWith, URIRef("http://academic.org/institution/manchester_u")))

g.add((yoshua, RDF.type, acad.Researcher))
g.add((yoshua, FOAF.name, Literal("Yoshua Bengio")))
g.add((yoshua, acad.affiliatedWith, URIRef("http://academic.org/institution/montreal_u")))

# 机构
paris_u = URIRef("http://academic.org/institution/paris_u")
g.add((paris_u, RDF.type, acad.Institution))
g.add((paris_u, FOAF.name, Literal("University of Paris")))

# 研究领域
ai = URIRef("http://academic.org/field/artificial_intelligence")
ml = URIRef("http://academic.org/field/machine_learning")
dl = URIRef("http://academic.org/field/deep_learning")
physics = URIRef("http://academic.org/field/physics")

g.add((ai, RDF.type, acad.ResearchField))
g.add((ai, RDFS.label, Literal("Artificial Intelligence")))

g.add((ml, RDF.type, acad.ResearchField))
g.add((ml, RDFS.label, Literal("Machine Learning")))
g.add((ml, acad.subFieldOf, ai))  # ML是AI的子领域

g.add((dl, RDF.type, acad.ResearchField))
g.add((dl, RDFS.label, Literal("Deep Learning")))
g.add((dl, acad.subFieldOf, ml))  # DL是ML的子领域

g.add((physics, RDF.type, acad.ResearchField))
g.add((physics, RDFS.label, Literal("Physics")))

# 论文
paper1 = URIRef("http://academic.org/paper/attention_is_all_you_need")
g.add((paper1, RDF.type, acad.Paper))
g.add((paper1, dct.title, Literal("Attention Is All You Need")))
g.add((paper1, acad.inField, dl))
g.add((paper1, dct.date, Literal("2017-06-12")))

paper2 = URIRef("http://academic.org/paper/computing_machinery_intelligence")
g.add((paper2, RDF.type, acad.Paper))
g.add((paper2, dct.title, Literal("Computing Machinery and Intelligence")))
g.add((paper2, acad.inField, ai))
g.add((paper2, dct.date, Literal("1950-10-01")))

# 作者关系
g.add((yoshua, acad.authorOf, paper1))
g.add((alan, acad.authorOf, paper2))

# 引用关系
g.add((paper1, acad.cites, URIRef("http://academic.org/paper/sequence_to_sequence")))
g.add((paper1, acad.cites, URIRef("http://academic.org/paper/neural_machine_translation")))

# ========== 5. 执行OWL推理 ==========
print("执行OWL推理...")
DeductiveClosure(OWLRL_Extension).expand(g)
print("推理完成! 三元组数量从基础数据扩展到:", len(g))

# ========== 6. 知识查询 ==========
def run_query(query_str, description):
    print(f"\n=== {description} ===")
    query = prepareQuery(query_str)
    results = g.query(query)
    for row in results:
        print(row)

# 查询1: 找到所有AI领域的论文（包括子领域）
q1 = """
PREFIX acad: <http://academic.org/ontology/>
SELECT ?paper ?title WHERE {
  ?paper a acad:Paper ;
          dct:title ?title ;
          acad:inField ?field .
  ?field acad:subFieldOf* acad:field/artificial_intelligence .
}
"""
run_query(q1, "AI领域的论文（包含子领域）")

# 查询2: 查找引用链条
q2 = """
PREFIX acad: <http://academic.org/ontology/>
SELECT ?citing ?citedTitle WHERE {
  acad:paper/attention_is_all_you_need acad:cites+ ?cited .
  ?cited dct:title ?citedTitle .
}
"""
run_query(q2, "'Attention Is All You Need'引用的论文")

# 查询3: 机构的研究人员及其领域
q3 = """
PREFIX acad: <http://academic.org/ontology/>
SELECT ?researcherName ?fieldLabel WHERE {
  ?institution foaf:name "University of Paris" .
  ?researcher acad:affiliatedWith ?institution ;
              foaf:name ?researcherName ;
              acad:authorOf/acad:inField ?field .
  ?field rdfs:label ?fieldLabel .
}
"""
run_query(q3, "巴黎大学的研究人员及其研究领域")

# 查询4: 领域层级结构（利用推理结果）
q4 = """
PREFIX acad: <http://academic.org/ontology/>
SELECT ?field ?label ?parent WHERE {
  ?field rdfs:label ?label .
  OPTIONAL { ?field acad:subFieldOf ?parent }
}
ORDER BY ?field
"""
run_query(q4, "研究领域层级结构")

# ========== 7. 导出知识图谱 ==========
g.serialize("academic_knowledge_graph.ttl", format="turtle")
print("\n知识图谱已导出为 academic_knowledge_graph.ttl")
```

### 案例解析与真实应用价值

1. **本体建模**：
   - 定义了学术领域的核心类（研究人员、论文、机构、领域）
   - 建立了属性体系（作者关系、引用关系、从属关系等）
   - 声明`subFieldOf`为传递属性，支持领域层级推理

2. **推理能力展示**：
   ```mermaid
   graph TD
       A[Deep Learning] -->|subFieldOf| B[Machine Learning]
       B -->|subFieldOf| C[Artificial Intelligence]
       D[Attention Is All You Need] -->|inField| A
       E[推理结果]:::inferred -->|inField| C
       classDef inferred fill:#f9f,stroke:#333
   ```
   - 论文《Attention Is All You Need》属于Deep Learning
   - 通过传递推理，该论文也属于AI领域（无需显式声明）

3. **复杂查询示例**：
   - **跨层级领域查询**：查找AI领域的所有论文（包含子领域）
   - **引用链分析**：查找某论文引用的所有论文（支持多级引用）
   - **机构研究分析**：查询特定机构研究人员的研究领域分布

4. **真实应用场景**：
   - 学术影响力分析（通过引用关系）
   - 研究趋势预测（领域论文数量时序分析）
   - 跨学科合作发现（不同领域研究人员合作网络）
   - 机构研究实力评估（领域分布、论文产出）

### 执行结果示例

```
执行OWL推理...
推理完成! 三元组数量从基础数据扩展到: 87

=== AI领域的论文（包含子领域） ===
(rdflib.term.URIRef('http://academic.org/paper/attention_is_all_you_need'), rdflib.term.Literal('Attention Is All You Need'))
(rdflib.term.URIRef('http://academic.org/paper/computing_machinery_intelligence'), rdflib.term.Literal('Computing Machinery and Intelligence'))

=== 'Attention Is All You Need'引用的论文 ===
(rdflib.term.Literal('Computing Machinery and Intelligence'))

=== 巴黎大学的研究人员及其研究领域 ===
(rdflib.term.Literal('Marie Curie'), rdflib.term.Literal('Physics'))

=== 研究领域层级结构 ===
(rdflib.term.URIRef('http://academic.org/field/artificial_intelligence'), rdflib.term.Literal('Artificial Intelligence'), None)
(rdflib.term.URIRef('http://academic.org/field/deep_learning'), rdflib.term.Literal('Deep Learning'), rdflib.term.URIRef('http://academic.org/field/machine_learning'))
(rdflib.term.URIRef('http://academic.org/field/machine_learning'), rdflib.term.Literal('Machine Learning'), rdflib.term.URIRef('http://academic.org/field/artificial_intelligence'))
(rdflib.term.URIRef('http://academic.org/field/physics'), rdflib.term.Literal('Physics'), None)

知识图谱已导出为 academic_knowledge_graph.ttl
```

### 关键知识点

1. **传递属性推理**：
   ```python
   g.add((acad.subFieldOf, RDF.type, OWL.TransitiveProperty))
   ```
   使`subFieldOf`具有传递性，自动推导多层级领域关系

2. **属性路径查询**：
   ```sparql
   ?field acad:subFieldOf* acad:field/artificial_intelligence
   ```
   使用`*`操作符查找所有直接或间接子领域

3. **链式属性查询**：
   ```sparql
   ?researcher acad:authorOf/acad:inField ?field
   ```
   查找研究人员所著论文的研究领域

4. **推理扩展**：
   `OWLRL_Extension`实现了OWL 2 RL推理规则，自动：
   - 扩展类层级
   - 推导传递闭包
   - 完善属性特征

构建学术知识图谱，适用于研究机构知识管理、学术搜索引擎、科技政策分析等场景。
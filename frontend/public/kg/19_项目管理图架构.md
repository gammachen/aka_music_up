### 基于Neo4j的项目管理图数据库技术方案

#### 模型设计（使用PM_前缀）
```cypher
// ========== 基础项目结构 ==========
// 1. 创建项目
CREATE (proj:PM_Project {
  id: "proj_ERP",
  name: "ERP系统升级",
  startDate: "2023-03-01",
  deadline: "2023-08-31",
  status: "进行中",
  description: "企业资源规划系统全面升级项目"
});

// 2. 创建人员（开发团队）
CREATE 
  (dev1:PM_Staff {id: "staff_101", name: "张明", role: "开发工程师", capacity: 160, skills: ["Java", "Spring"]}),
  (dev2:PM_Staff {id: "staff_102", name: "李华", role: "开发工程师", capacity: 140, skills: ["Python", "Django"]}),
  (dev3:PM_Staff {id: "staff_103", name: "陈伟", role: "开发工程师", capacity: 150, skills: ["JavaScript", "React"]}),
  (dev4:PM_Staff {id: "staff_104", name: "刘洋", role: "开发工程师", capacity: 145, skills: ["C#", ".NET"]}),
  (tester1:PM_Staff {id: "staff_201", name: "王芳", role: "测试工程师", capacity: 150, skills: ["Selenium", "JMeter"]}),
  (tester2:PM_Staff {id: "staff_202", name: "赵静", role: "测试工程师", capacity: 140, skills: ["Postman", "LoadRunner"]}),
  (pm:PM_Staff {id: "staff_001", name: "赵经理", role: "项目经理", capacity: 120, skills: ["项目管理", "风险管理"]}),
  (designer:PM_Staff {id: "staff_301", name: "林设计师", role: "UI设计师", capacity: 130, skills: ["Figma", "Photoshop"]}),
  (ba:PM_Staff {id: "staff_401", name: "周分析师", role: "业务分析师", capacity: 135, skills: ["需求分析", "流程优化"]});

// 3. 创建主任务
CREATE 
  (ui:PM_Task {id: "task_1001", title: "UI改造", estimatedHours: 80, consumedHours: 80, status: "已完成", deadline: "2023-04-15"}),
  (api:PM_Task {id: "task_1002", title: "API重构", estimatedHours: 120, consumedHours: 60, status: "进行中", deadline: "2023-05-20"}),
  (report:PM_Task {id: "task_1003", title: "报表模块", estimatedHours: 200, consumedHours: 30, status: "进行中", deadline: "2023-07-15"}),
  (security:PM_Task {id: "task_1004", title: "安全增强", estimatedHours: 100, consumedHours: 20, status: "未开始", deadline: "2023-07-31"}),
  (integration:PM_Task {id: "task_1005", title: "第三方集成", estimatedHours: 150, consumedHours: 40, status: "进行中", deadline: "2023-08-10"}),
  (testing:PM_Task {id: "task_1006", title: "系统测试", estimatedHours: 180, consumedHours: 0, status: "未开始", deadline: "2023-08-20"});

// 4. 创建子任务
CREATE 
  (sub1:PM_Task {id: "task_2001", title: "登录页重设计", estimatedHours: 20, consumedHours: 20, status: "已完成", deadline: "2023-03-20"}),
  (sub2:PM_Task {id: "task_2002", title: "订单接口开发", estimatedHours: 60, consumedHours: 40, status: "进行中", deadline: "2023-05-10"}),
  (sub3:PM_Task {id: "task_2003", title: "库存接口开发", estimatedHours: 40, consumedHours: 10, status: "阻塞", deadline: "2023-05-15"}),
  (sub4:PM_Task {id: "task_2004", title: "销售报表开发", estimatedHours: 70, consumedHours: 30, status: "进行中", deadline: "2023-06-30"}),
  (sub5:PM_Task {id: "task_2005", title: "财务报表开发", estimatedHours: 60, consumedHours: 0, status: "未开始", deadline: "2023-07-10"}),
  (sub6:PM_Task {id: "task_2006", title: "权限系统升级", estimatedHours: 50, consumedHours: 20, status: "进行中", deadline: "2023-07-20"}),
  (sub7:PM_Task {id: "task_2007", title: "支付网关集成", estimatedHours: 80, consumedHours: 40, status: "进行中", deadline: "2023-08-05"}),
  (sub8:PM_Task {id: "task_2008", title: "物流API对接", estimatedHours: 60, consumedHours: 0, status: "未开始", deadline: "2023-08-08"}),
  (sub9:PM_Task {id: "task_2009", title: "UI一致性优化", estimatedHours: 40, consumedHours: 0, status: "未开始", deadline: "2023-04-30", risk: "已延期"}),
  (sub10:PM_Task {id: "task_2010", title: "主页性能优化", estimatedHours: 30, consumedHours: 15, status: "进行中", deadline: "2023-05-25"});

// 5. 创建BUG
CREATE 
  (bug1:PM_Bug {id: "bug_3001", title: "登录超时问题", severity: "严重", status: "待修复", foundDate: "2023-04-10", description: "用户登录后5分钟无操作会超时"}),
  (bug2:PM_Bug {id: "bug_3002", title: "订单金额计算错误", severity: "致命", status: "修复中", foundDate: "2023-05-05", description: "含税价计算时四舍五入错误"}),
  (bug3:PM_Bug {id: "bug_3003", title: "库存同步延迟", severity: "严重", status: "待修复", foundDate: "2023-05-12", description: "库存变化后需5分钟才同步"}),
  (bug4:PM_Bug {id: "bug_3004", title: "报表导出格式错误", severity: "一般", status: "新建", foundDate: "2023-06-01", description: "Excel导出时日期格式不正确"}),
  (bug5:PM_Bug {id: "bug_3005", title: "权限验证绕过", severity: "致命", status: "修复中", foundDate: "2023-06-15", description: "特定URL可绕过权限验证"}),
  (bug6:PM_Bug {id: "bug_3006", title: "支付回调失败", severity: "严重", status: "待修复", foundDate: "2023-07-03", description: "第三方支付回调处理失败率10%"}),
  (bug7:PM_Bug {id: "bug_3007", title: "移动端UI错位", severity: "一般", status: "新建", foundDate: "2023-07-10", description: "iPhone 14上部分元素错位"});

// ========== 构建项目结构 ==========
// 6. 项目与主任务关系
MATCH (proj:PM_Project {id: "proj_ERP"})
MATCH (ui:PM_Task {id: "task_1001"}), 
      (api:PM_Task {id: "task_1002"}),
      (report:PM_Task {id: "task_1003"}),
      (security:PM_Task {id: "task_1004"}),
      (integration:PM_Task {id: "task_1005"}),
      (testing:PM_Task {id: "task_1006"})
CREATE 
  (proj)-[:HAS_MAIN_TASK]->(ui),
  (proj)-[:HAS_MAIN_TASK]->(api),
  (proj)-[:HAS_MAIN_TASK]->(report),
  (proj)-[:HAS_MAIN_TASK]->(security),
  (proj)-[:HAS_MAIN_TASK]->(integration),
  (proj)-[:HAS_MAIN_TASK]->(testing);

// 7. 主任务与子任务关系
MATCH (ui:PM_Task {id: "task_1001"})
MATCH (sub1:PM_Task {id: "task_2001"}),
      (sub9:PM_Task {id: "task_2009"}),
      (sub10:PM_Task {id: "task_2010"})
CREATE
  (ui)-[:HAS_SUBTASK]->(sub1),
  (ui)-[:HAS_SUBTASK]->(sub9),
  (ui)-[:HAS_SUBTASK]->(sub10);

MATCH (api:PM_Task {id: "task_1002"})
MATCH (sub2:PM_Task {id: "task_2002"}),
      (sub3:PM_Task {id: "task_2003"})
CREATE
  (api)-[:HAS_SUBTASK]->(sub2),
  (api)-[:HAS_SUBTASK]->(sub3);

MATCH (report:PM_Task {id: "task_1003"})
MATCH (sub4:PM_Task {id: "task_2004"}),
      (sub5:PM_Task {id: "task_2005"})
CREATE
  (report)-[:HAS_SUBTASK]->(sub4),
  (report)-[:HAS_SUBTASK]->(sub5);

MATCH (security:PM_Task {id: "task_1004"})
MATCH (sub6:PM_Task {id: "task_2006"})
CREATE
  (security)-[:HAS_SUBTASK]->(sub6);

MATCH (integration:PM_Task {id: "task_1005"})
MATCH (sub7:PM_Task {id: "task_2007"}),
      (sub8:PM_Task {id: "task_2008"})
CREATE
  (integration)-[:HAS_SUBTASK]->(sub7),
  (integration)-[:HAS_SUBTASK]->(sub8);

// ========== 任务依赖关系 ==========
// 8. 建立任务依赖
MATCH (ui:PM_Task {id: "task_1001"}), 
      (api:PM_Task {id: "task_1002"})
CREATE (api)-[:DEPENDS_ON {type: "FS", description: "UI设计完成后才能开发API"}]->(ui);

MATCH (sub1:PM_Task {id: "task_2001"}), 
      (sub2:PM_Task {id: "task_2002"})
CREATE (sub2)-[:DEPENDS_ON {type: "FS", description: "登录页完成后才能开发订单接口"}]->(sub1);

MATCH (api:PM_Task {id: "task_1002"}),
      (report:PM_Task {id: "task_1003"})
CREATE (report)-[:DEPENDS_ON {type: "FS", description: "API完成才能开发报表"}]->(api);

MATCH (report:PM_Task {id: "task_1003"}),
      (testing:PM_Task {id: "task_1006"})
CREATE (testing)-[:DEPENDS_ON {type: "FS", description: "报表模块完成才能开始系统测试"}]->(report);

MATCH (security:PM_Task {id: "task_1004"}),
      (testing:PM_Task {id: "task_1006"})
CREATE (testing)-[:DEPENDS_ON {type: "FS", description: "安全增强完成才能开始测试"}]->(security);

MATCH (integration:PM_Task {id: "task_1005"}),
      (testing:PM_Task {id: "task_1006"})
CREATE (testing)-[:DEPENDS_ON {type: "FS", description: "第三方集成完成才能开始测试"}]->(integration);

MATCH (sub3:PM_Task {id: "task_2003"}),
      (sub4:PM_Task {id: "task_2004"})
CREATE (sub4)-[:DEPENDS_ON {type: "FS", description: "库存接口完成才能开发销售报表"}]->(sub3);

MATCH (sub7:PM_Task {id: "task_2007"}),
      (sub8:PM_Task {id: "task_2008"})
CREATE (sub8)-[:DEPENDS_ON {type: "FS", description: "支付集成完成才能对接物流API"}]->(sub7);

// ========== 人员分配关系 ==========
// 9. 开发人员分配
MATCH (dev1:PM_Staff {id: "staff_101"}), 
      (sub2:PM_Task {id: "task_2002"})
CREATE (dev1)-[:ASSIGNED_TO {allocation: 70, startDate: "2023-04-01"}]->(sub2);

MATCH (dev1:PM_Staff {id: "staff_101"}), 
      (bug2:PM_Bug {id: "bug_3002"})
CREATE (dev1)-[:ASSIGNED_TO {allocation: 20, startDate: "2023-05-06"}]->(bug2);

MATCH (dev2:PM_Staff {id: "staff_102"}), 
      (sub3:PM_Task {id: "task_2003"})
CREATE (dev2)-[:ASSIGNED_TO {allocation: 50, startDate: "2023-04-15"}]->(sub3);

MATCH (dev2:PM_Staff {id: "staff_102"}), 
      (bug3:PM_Bug {id: "bug_3003"})
CREATE (dev2)-[:ASSIGNED_TO {allocation: 30, startDate: "2023-05-13"}]->(bug3);

MATCH (dev3:PM_Staff {id: "staff_103"}), 
      (sub4:PM_Task {id: "task_2004"})
CREATE (dev3)-[:ASSIGNED_TO {allocation: 80, startDate: "2023-05-01"}]->(sub4);

MATCH (dev3:PM_Staff {id: "staff_103"}), 
      (sub10:PM_Task {id: "task_2010"})
CREATE (dev3)-[:ASSIGNED_TO {allocation: 30, startDate: "2023-05-15"}]->(sub10);

MATCH (dev4:PM_Staff {id: "staff_104"}), 
      (sub7:PM_Task {id: "task_2007"})
CREATE (dev4)-[:ASSIGNED_TO {allocation: 90, startDate: "2023-06-01"}]->(sub7);

MATCH (dev4:PM_Staff {id: "staff_104"}), 
      (bug6:PM_Bug {id: "bug_3006"})
CREATE (dev4)-[:ASSIGNED_TO {allocation: 40, startDate: "2023-07-04"}]->(bug6);

// 10. 测试人员分配
MATCH (tester1:PM_Staff {id: "staff_201"}), 
      (bug1:PM_Bug {id: "bug_3001"})
CREATE (tester1)-[:ASSIGNED_TO {allocation: 30, startDate: "2023-04-11"}]->(bug1);

MATCH (tester1:PM_Staff {id: "staff_201"}), 
      (testing:PM_Task {id: "task_1006"})
CREATE (tester1)-[:ASSIGNED_TO {allocation: 60, startDate: "2023-07-01"}]->(testing);

MATCH (tester2:PM_Staff {id: "staff_202"}), 
      (bug4:PM_Bug {id: "bug_3004"})
CREATE (tester2)-[:ASSIGNED_TO {allocation: 20, startDate: "2023-06-02"}]->(bug4);

MATCH (tester2:PM_Staff {id: "staff_202"}), 
      (testing:PM_Task {id: "task_1006"})
CREATE (tester2)-[:ASSIGNED_TO {allocation: 70, startDate: "2023-07-01"}]->(testing);

// 11. 设计人员分配
MATCH (designer:PM_Staff {id: "staff_301"}), 
      (ui:PM_Task {id: "task_1001"})
CREATE (designer)-[:ASSIGNED_TO {allocation: 100, startDate: "2023-03-01", endDate: "2023-04-15"}]->(ui);

MATCH (designer:PM_Staff {id: "staff_301"}), 
      (sub9:PM_Task {id: "task_2009"})
CREATE (designer)-[:ASSIGNED_TO {allocation: 50, startDate: "2023-04-16"}]->(sub9);

// 12. 业务分析师分配
MATCH (ba:PM_Staff {id: "staff_401"}), 
      (report:PM_Task {id: "task_1003"})
CREATE (ba)-[:ASSIGNED_TO {allocation: 40, startDate: "2023-04-01"}]->(report);

MATCH (ba:PM_Staff {id: "staff_401"}), 
      (integration:PM_Task {id: "task_1005"})
CREATE (ba)-[:ASSIGNED_TO {allocation: 30, startDate: "2023-05-01"}]->(integration);

// ========== BUG关联关系 ==========
// 13. BUG与任务关联
MATCH (sub2:PM_Task {id: "task_2002"}), 
      (bug2:PM_Bug {id: "bug_3002"})
CREATE 
  (sub2)-[:RELATED_BUG]->(bug2);

MATCH (sub3:PM_Task {id: "task_2003"}), 
      (bug3:PM_Bug {id: "bug_3003"})
CREATE 
  (sub3)-[:RELATED_BUG]->(bug3);

MATCH (sub4:PM_Task {id: "task_2004"}), 
      (bug4:PM_Bug {id: "bug_3004"})
CREATE 
  (sub4)-[:RELATED_BUG]->(bug4);

MATCH (sub6:PM_Task {id: "task_2006"}), 
      (bug5:PM_Bug {id: "bug_3005"})
CREATE 
  (sub6)-[:RELATED_BUG]->(bug5);

MATCH (sub7:PM_Task {id: "task_2007"}), 
      (bug6:PM_Bug {id: "bug_3006"})
CREATE 
  (sub7)-[:RELATED_BUG]->(bug6);

MATCH (ui:PM_Task {id: "task_1001"}), 
      (bug7:PM_Bug {id: "bug_3007"})
CREATE 
  (ui)-[:RELATED_BUG]->(bug7);

// 14. BUG阻塞任务
MATCH (bug3:PM_Bug {id: "bug_3003"}),
      (sub4:PM_Task {id: "task_2004"})
CREATE (bug3)-[:BLOCKS]->(sub4);

MATCH (bug2:PM_Bug {id: "bug_3002"}),
      (sub3:PM_Task {id: "task_2003"})
CREATE (bug2)-[:BLOCKS]->(sub3);

MATCH (bug5:PM_Bug {id: "bug_3005"}),
      (testing:PM_Task {id: "task_1006"})
CREATE (bug5)-[:BLOCKS]->(testing);

// ========== 历史任务记录 ==========
// 15. 创建历史任务
CREATE (archived:PM_Task {
  id: "task_0001",
  title: "需求分析",
  estimatedHours: 40,
  consumedHours: 45,
  status: "已完成",
  deadline: "2023-02-28",
  completionDate: "2023-02-27"
});

MATCH (proj:PM_Project {id: "proj_ERP"})
CREATE (proj)-[:HAS_MAIN_TASK]->(archived);

CREATE (archived2:PM_Task {
  id: "task_0002",
  title: "技术选型",
  estimatedHours: 30,
  consumedHours: 35,
  status: "已完成",
  deadline: "2023-02-15",
  completionDate: "2023-02-20"
});

MATCH (proj:PM_Project {id: "proj_ERP"})
CREATE (proj)-[:HAS_MAIN_TASK]->(archived2);

// 16. 历史任务人员分配
MATCH (ba:PM_Staff {id: "staff_401"}), 
      (archived:PM_Task {id: "task_0001"})
CREATE (ba)-[:ASSIGNED_TO {allocation: 80, startDate: "2023-02-01", endDate: "2023-02-27"}]->(archived);

MATCH (pm:PM_Staff {id: "staff_001"}), 
      (archived2:PM_Task {id: "task_0002"})
CREATE (pm)-[:ASSIGNED_TO {allocation: 60, startDate: "2023-02-10", endDate: "2023-02-20"}]->(archived2);

// ========== 风险任务标记 ==========
// 17. 标记高风险任务
MATCH (sub3:PM_Task {id: "task_2003"})
SET sub3.risk = "高风险";

MATCH (sub9:PM_Task {id: "task_2009"})
SET sub9.risk = "已延期";

MATCH (testing:PM_Task {id: "task_1006"})
SET testing.risk = "关键路径";

// ========== 任务文档关联 ==========
// 18. 创建文档节点
CREATE (doc1:PM_Document {id: "doc_1001", title: "UI设计规范", type: "设计文档", url: "https://docs/proj_ERP/ui_spec"}),
       (doc2:PM_Document {id: "doc_1002", title: "API接口文档", type: "技术文档", url: "https://docs/proj_ERP/api_doc"}),
       (doc3:PM_Document {id: "doc_1003", title: "测试用例", type: "测试文档", url: "https://docs/proj_ERP/test_cases"});

// 19. 任务与文档关联
MATCH (ui:PM_Task {id: "task_1001"}), (doc1:PM_Document {id: "doc_1001"})
CREATE (ui)-[:HAS_DOCUMENT]->(doc1);

MATCH (api:PM_Task {id: "task_1002"}), (doc2:PM_Document {id: "doc_1002"})
CREATE (api)-[:HAS_DOCUMENT]->(doc2);

MATCH (testing:PM_Task {id: "task_1006"}), (doc3:PM_Document {id: "doc_1003"})
CREATE (testing)-[:HAS_DOCUMENT]->(doc3);

// ========== 创建会议记录 ==========
// 20. 创建会议节点
CREATE (meeting1:PM_Meeting {
  id: "meet_0501",
  title: "迭代计划会议",
  date: "2023-05-01",
  duration: 120,
  attendees: ["张明", "李华", "赵经理"]
});

CREATE (meeting2:PM_Meeting {
  id: "meet_0615",
  title: "风险分析会",
  date: "2023-06-15",
  duration: 90,
  attendees: ["赵经理", "周分析师", "陈伟"]
});

// 21. 会议与任务关联
MATCH (meeting1:PM_Meeting {id: "meet_0501"}), (api:PM_Task {id: "task_1002"})
CREATE (meeting1)-[:RELATED_TO]->(api);

MATCH (meeting2:PM_Meeting {id: "meet_0615"}), (security:PM_Task {id: "task_1004"})
CREATE (meeting2)-[:RELATED_TO]->(security);
```

![](projectmanage_tasks.svg)

## 数据分析示例

### 1. 关键路径分析
```cypher
// 查找项目关键路径
MATCH path=(start:PM_Task)-[:DEPENDS_ON*]->(end:PM_Task)
WHERE NOT (start)<-[:DEPENDS_ON]-()
  AND NOT (end)-[:DEPENDS_ON]->()
WITH path, 
  REDUCE(s=0, n IN nodes(path) | s + n.estimatedHours) AS totalHours
RETURN path, totalHours
ORDER BY totalHours DESC
LIMIT 1;
```

![](critical_path.svg)

### 2. 人员负载分析
```cypher
// 查看所有人员当前工作负载
MATCH (s:PM_Staff)-[a:ASSIGNED_TO]->(t)
WHERE t.status IN ["未开始", "进行中", "阻塞"]
WITH s, SUM(a.allocation) AS totalAllocation
RETURN s.name, s.role, totalAllocation,
  CASE 
    WHEN totalAllocation > 100 THEN '过载'
    WHEN totalAllocation > 80 THEN '饱和'
    WHEN totalAllocation > 50 THEN '适中'
    ELSE '空闲'
  END AS loadStatus
ORDER BY totalAllocation DESC;
```

```json
[
  {
    "s.name": "陈伟",
    "s.role": "开发工程师",
    "totalAllocation": 110,
    "loadStatus": "过载"
  },
  {
    "s.name": "刘洋",
    "s.role": "开发工程师",
    "totalAllocation": 90,
    "loadStatus": "饱和"
  },
  {
    "s.name": "张明",
    "s.role": "开发工程师",
    "totalAllocation": 70,
    "loadStatus": "适中"
  },
  {
    "s.name": "赵静",
    "s.role": "测试工程师",
    "totalAllocation": 70,
    "loadStatus": "适中"
  },
  {
    "s.name": "周分析师",
    "s.role": "业务分析师",
    "totalAllocation": 70,
    "loadStatus": "适中"
  },
  {
    "s.name": "王芳",
    "s.role": "测试工程师",
    "totalAllocation": 60,
    "loadStatus": "适中"
  },
  {
    "s.name": "李华",
    "s.role": "开发工程师",
    "totalAllocation": 50,
    "loadStatus": "空闲"
  },
  {
    "s.name": "林设计师",
    "s.role": "UI设计师",
    "totalAllocation": 50,
    "loadStatus": "空闲"
  }
]
```

### 3. 高风险任务识别
```cypher
// 查找高风险任务和阻塞的Bug
MATCH (t:PM_Task)
WHERE t.risk IS NOT NULL OR t.status = "阻塞"
OPTIONAL MATCH (t)<-[:BLOCKS]-(b:PM_Bug)
RETURN t.title AS task, t.status, t.risk, 
       COLLECT(b.title) AS blockingBugs,
       date(t.deadline) - date() AS daysRemaining
ORDER BY daysRemaining ASC;
```

```json
[
  {
    "task": "库存接口开发",
    "t.status": "阻塞",
    "t.risk": "高风险",
    "blockingBugs": [
      "订单金额计算错误"
    ],
    "daysRemaining": -29
  },
  {
    "task": "系统测试",
    "t.status": "未开始",
    "t.risk": "关键路径",
    "blockingBugs": [
      "权限验证绕过"
    ],
    "daysRemaining": -24
  },
  {
    "task": "UI一致性优化",
    "t.status": "未开始",
    "t.risk": "已延期",
    "blockingBugs": [],
    "daysRemaining": -13
  }
]
```

### 4. 项目进度概览
```cypher
// 项目整体进度分析
MATCH (p:PM_Project {id: "proj_ERP"})-[:HAS_MAIN_TASK]->(mt:PM_Task)
OPTIONAL MATCH (mt)-[:HAS_SUBTASK*0..]->(st:PM_Task)
WITH p, mt, COLLECT(DISTINCT st) + mt AS allTasks
UNWIND allTasks AS task
WITH p, 
  COUNT(task) AS totalTasks,
  SUM(CASE task.status WHEN '已完成' THEN 1 ELSE 0 END) AS completed,
  SUM(CASE WHEN date(task.deadline) < date() AND task.status <> '已完成' THEN 1 ELSE 0 END) AS delayed
RETURN p.name AS project,
  completed * 100.0 / totalTasks AS progressPercent,
  delayed,
  totalTasks - completed AS pendingTasks;
```

```json
[
  {
    "keys": [
      "project",
      "progressPercent",
      "delayed",
      "pendingTasks"
    ],
    "length": 4,
    "_fields": [
      "ERP系统升级",
      13.636363636363637,
      {
        "low": 19,
        "high": 0
      },
      {
        "low": 19,
        "high": 0
      }
    ],
    "_fieldLookup": {
      "project": 0,
      "progressPercent": 1,
      "delayed": 2,
      "pendingTasks": 3
    }
  }
]
```

### 系统优势说明

1. **关键路径可视化**  
   - 通过`DEPENDS_ON`关系链自动计算最长路径
   - 实时识别瓶颈任务和延期风险点

2. **资源优化配置**  
   - `ASSIGNED_TO.allocation`量化人员负载
   - 自动检测资源过载（>100%）或闲置（<60%）

3. **风险预警机制**  
   - 基于任务状态、截止日期、阻塞BUG的三维检测
   - 提前3-5天触发预警通知

4. **进度精确追踪**  
   - 层级化进度计算（主任务/子任务）
   - 实际工时 vs 预估工时偏差分析

5. **影响分析能力**  
   ```cypher
   // 查询任务影响范围
   MATCH (t:PM_Task {id: $taskId})<-[:DEPENDS_ON*]-(downstream)
   RETURN downstream
   ```

可视化展示，并设置定时任务执行风险检测查询，结果推送至项目管理平台。